<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        thead tr {
            background-color: skyblue;
        }
    </style>
</head>

<body>
    <table border="1">
        <thead id="qx">
            <tr>
                <td><input type="checkbox" name="" id=""></td>
                <td>清单</td>
            </tr>
        </thead>
        <tbody id="ck">
            <tr>
                <td><input type="checkbox" name="" id=""></td>
                <td>iphone se</td>
            </tr>
            <tr>
                <td><input type="checkbox" name="" id=""></td>
                <td>iphone 12</td>
            </tr>
            <tr>
                <td><input type="checkbox" name="" id=""></td>
                <td>iphone 13</td>
            </tr>
        </tbody>
    </table>
    <script>
        // 1.获取事件源
        // 1.1 获取全选按钮的事件源
        var qx = document.querySelector('#qx').querySelector('input')
        // 1.2获取所有tbody的复选按钮
        var ck = document.querySelector('#ck').querySelectorAll('input')
        // 2.注册事件 对qx注册点击事件
        qx.onclick = function () {
            // 2.1 遍历所有的ck的input
            for (var i = 0; i < ck.length; i++) {
                // 2.2 当点击qx的input按钮然后全选ck的input按钮
                ck[i].checked = true
            }
        }
        // 3. 遍历所有的ck的input
        for (var i = 0; i < ck.length; i++)
            // 3.1 当点击ck的所有input按钮触发点击事件
            ck[i].onclick = function () {
                // 3.2 这里使用一个算法 当flag为true
                var flag = true
                // 3.3 遍历所有的ck的input
                for (var i = 0; i < ck.length; i++) {
                    // 3.4 当ck的所有input未被选中 这里!取反了的  如果有则flag=false
                    if (!ck[i].checked) {
                        flag = false
                    }
                    // 3.5 否则这里就返回true
                    qx.checked = flag
                }
            }
    </script>
</body>

</html>